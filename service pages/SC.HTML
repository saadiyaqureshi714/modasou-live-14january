
<script>
  // 1. INITIALIZATION
  const m_db = window.supabase.createClient(
    "https://gztneesmxwfhdmhqikel.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd6dG5lZXNteHdmaGRtaHFpa2VsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxNjAzNDAsImV4cCI6MjA4MjczNjM0MH0.iWDtkljuQLZFQeLvBrJHVyXNfpu4bJOvvVab3G0eOsA"
  );

  let sessionId = localStorage.getItem("modasou_session_id") || "sess_" + Math.random().toString(36).substr(2, 9);
  localStorage.setItem("modasou_session_id", sessionId);

  // 2. METER/CM SYNC
  function setupSync(mId, cId) {
    const m = document.getElementById(mId), c = document.getElementById(cId);
    m.oninput = () => c.value = m.value ? Math.round(m.value * 100) : '';
    c.oninput = () => m.value = c.value ? (c.value / 100).toFixed(2) : '';
  }

  document.addEventListener("DOMContentLoaded", () => {
    setupSync('topMeter', 'topCm');
    setupSync('bottomMeter', 'bottomCm');
  });

  // 3. PREVIEWS
  function handlePreview(input, pId) {
    const file = input.files[0], el = document.getElementById(pId);
    if (file) {
      el.src = URL.createObjectURL(file);
      el.style.display = 'block';
      if(el.tagName === 'VIDEO') el.load();
    }
  }

  function selectSample(img) {
    document.querySelectorAll('.sample-scroll img').forEach(i => i.classList.remove('selected'));
    img.classList.add('selected');
    const prev = document.getElementById('designPreview');
    prev.src = img.src;
    prev.style.display = 'block';
  }

  function previewGoogleImage() {
    const url = document.getElementById('googleUrl').value.trim();
    const img = document.getElementById('urlPreview');
    if (url) { img.src = url; img.style.display = 'block'; }
  }

  // 4. BACKEND FUNCTIONS
  
  async function submitFabricData() {
    localStorage.setItem("active_service", "service2");
    const btn = document.getElementById('submitFabricBtn'), file = document.getElementById('fabricVideoInput').files[0];
    if (!file) return alert("Please upload a fabric video");
    btn.innerText = "Uploading..."; btn.disabled = true;

    try {
      const path = `fabric_${sessionId}_${Date.now()}.mp4`;
      await m_db.storage.from('fabrics').upload(path, file);
      const { data } = m_db.storage.from('fabrics').getPublicUrl(path);

      await m_db.from('service_2').upsert([{
        session_id: sessionId,
        fabric_video_url: data.publicUrl,
        top_mtr: document.getElementById('topMeter').value || null,
        top_cm: document.getElementById('topCm').value || null,
        bottom_mtr: document.getElementById('bottomMeter').value || null,
        bottom_cm: document.getElementById('bottomCm').value || null,
        lining_preference: document.querySelector('input[name="lining"]:checked').value,
        designer_note: document.getElementById('designerNote').value || null,
        created_at: new Date()
      }], { onConflict: 'session_id' });

      alert("Fabric data saved! ✅");
      btn.innerText = "SUBMITTED ✓";
    } catch (e) { alert(e.message); btn.disabled = false; btn.innerText = "SUBMIT FABRIC"; }
  }

  async function submitDesignData() {
    localStorage.setItem("active_service", "service2");
    const btn = document.getElementById('submitDesignBtn'), file = document.getElementById('designUpload').files[0];
    const sampleImg = document.querySelector('.sample-scroll img.selected');
    
    if (!file && !sampleImg) return alert("Please upload an image or select a sample");
    btn.innerText = "Saving..."; btn.disabled = true;

    try {
      let finalUrl = sampleImg ? sampleImg.src : "";
      if (file) {
        const path = `design_${sessionId}_${Date.now()}.jpg`;
        await m_db.storage.from('designs').upload(path, file);
        finalUrl = m_db.storage.from('designs').getPublicUrl(path).data.publicUrl;
      }

      await m_db.from('service_2').upsert([{
        session_id: sessionId,
        design_image_url: finalUrl,
        created_at: new Date()
      }], { onConflict: 'session_id' });

      alert("Design saved! ✅");
      btn.innerText = "SUBMITTED ✓";
    } catch (e) { alert(e.message); btn.disabled = false; }
  }

  async function submitGoogleDesign() {
    localStorage.setItem("active_service", "service2");
    const url = document.getElementById('googleUrl').value.trim();
    if (!url) return alert("Please paste an image link first");
    const btn = document.getElementById('submitGoogleBtn');
    btn.innerText = "Saving Link...";

    try {
      await m_db.from('service_2').upsert([{
        session_id: sessionId,
        design_image_url: url,
        created_at: new Date()
      }], { onConflict: 'session_id' });

      alert("Online design saved! ✅");
      btn.innerText = "SAVED ✓";
    } catch (e) { alert(e.message); }
  }

  // NAVIGATION
  document.getElementById("measurementBtn").onclick = () => {
    const s = new URLSearchParams(window.location.search).get("service");
    if(!s) return alert("Select service first");
    const routes = { blouse: "measurement-blouse.html", dress: "measurement-dress.html", top: "measurement-Tops.html", kurta: "measurement-kurta.html", skirt: "measurement-skirt.html", lehenga: "measurement-lehenga.html", pant: "measurement-pants.html" };
    window.location.href = routes[s] || alert("Route not found");
  };
</script>
</body>
</html>

<script>
  // 1. INITIALIZATION
  const m_db = window.supabase.createClient(
    "https://gztneesmxwfhdmhqikel.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd6dG5lZXNteHdmaGRtaHFpa2VsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxNjAzNDAsImV4cCI6MjA4MjczNjM0MH0.iWDtkljuQLZFQeLvBrJHVyXNfpu4bJOvvVab3G0eOsA"
  );

  let sessionId = localStorage.getItem("modasou_session_id") || "sess_" + Math.random().toString(36).substr(2, 9);
  localStorage.setItem("modasou_session_id", sessionId);

  // 2. METER/CM SYNC
  function setupSync(mId, cId) {
    const m = document.getElementById(mId), c = document.getElementById(cId);
    m.oninput = () => c.value = m.value ? Math.round(m.value * 100) : '';
    c.oninput = () => m.value = c.value ? (c.value / 100).toFixed(2) : '';
  }

  document.addEventListener("DOMContentLoaded", () => {
    setupSync('topMeter', 'topCm');
    setupSync('bottomMeter', 'bottomCm');
  });

  // 3. PREVIEWS
  function handlePreview(input, pId) {
    const file = input.files[0], el = document.getElementById(pId);
    if (file) {
      el.src = URL.createObjectURL(file);
      el.style.display = 'block';
      if(el.tagName === 'VIDEO') el.load();
    }
  }

  function selectSample(img) {
    document.querySelectorAll('.sample-scroll img').forEach(i => i.classList.remove('selected'));
    img.classList.add('selected');
    const prev = document.getElementById('designPreview');
    prev.src = img.src;
    prev.style.display = 'block';
  }

  function previewGoogleImage() {
    const url = document.getElementById('googleUrl').value.trim();
    const img = document.getElementById('urlPreview');
    if (url) { img.src = url; img.style.display = 'block'; }
  }

  // 4. BACKEND FUNCTIONS
  
  async function submitFabricData() {
    localStorage.setItem("active_service", "service2");
    const btn = document.getElementById('submitFabricBtn'), file = document.getElementById('fabricVideoInput').files[0];
    if (!file) return alert("Please upload a fabric video");
    btn.innerText = "Uploading..."; btn.disabled = true;

    try {
      const path = `fabric_${sessionId}_${Date.now()}.mp4`;
      await m_db.storage.from('fabrics').upload(path, file);
      const { data } = m_db.storage.from('fabrics').getPublicUrl(path);

      await m_db.from('service_2').upsert([{
        session_id: sessionId,
        fabric_video_url: data.publicUrl,
        top_mtr: document.getElementById('topMeter').value || null,
        top_cm: document.getElementById('topCm').value || null,
        bottom_mtr: document.getElementById('bottomMeter').value || null,
        bottom_cm: document.getElementById('bottomCm').value || null,
        lining_preference: document.querySelector('input[name="lining"]:checked').value,
        designer_note: document.getElementById('designerNote').value || null,
        created_at: new Date()
      }], { onConflict: 'session_id' });

      alert("Fabric data saved! ✅");
      btn.innerText = "SUBMITTED ✓";
    } catch (e) { alert(e.message); btn.disabled = false; btn.innerText = "SUBMIT FABRIC"; }
  }

  async function submitDesignData() {
    localStorage.setItem("active_service", "service2");
    const btn = document.getElementById('submitDesignBtn'), file = document.getElementById('designUpload').files[0];
    const sampleImg = document.querySelector('.sample-scroll img.selected');
    
    if (!file && !sampleImg) return alert("Please upload an image or select a sample");
    btn.innerText = "Saving..."; btn.disabled = true;

    try {
      let finalUrl = sampleImg ? sampleImg.src : "";
      if (file) {
        const path = `design_${sessionId}_${Date.now()}.jpg`;
        await m_db.storage.from('designs').upload(path, file);
        finalUrl = m_db.storage.from('designs').getPublicUrl(path).data.publicUrl;
      }

      await m_db.from('service_2').upsert([{
        session_id: sessionId,
        design_image_url: finalUrl,
        created_at: new Date()
      }], { onConflict: 'session_id' });

      alert("Design saved! ✅");
      btn.innerText = "SUBMITTED ✓";
    } catch (e) { alert(e.message); btn.disabled = false; }
  }

  async function submitGoogleDesign() {
    localStorage.setItem("active_service", "service2");
    const url = document.getElementById('googleUrl').value.trim();
    if (!url) return alert("Please paste an image link first");
    const btn = document.getElementById('submitGoogleBtn');
    btn.innerText = "Saving Link...";

    try {
      await m_db.from('service_2').upsert([{
        session_id: sessionId,
        design_image_url: url,
        created_at: new Date()
      }], { onConflict: 'session_id' });

      alert("Online design saved! ✅");
      btn.innerText = "SAVED ✓";
    } catch (e) { alert(e.message); }
  }

  // NAVIGATION
  document.getElementById("measurementBtn").onclick = () => {
    const s = new URLSearchParams(window.location.search).get("service");
    if(!s) return alert("Select service first");
    const routes = { blouse: "measurement-blouse.html", dress: "measurement-dress.html", top: "measurement-Tops.html", kurta: "measurement-kurta.html", skirt: "measurement-skirt.html", lehenga: "measurement-lehenga.html", pant: "measurement-pants.html" };
    window.location.href = routes[s] || alert("Route not found");
  };
</script>
</body>
</html>



service2 <script>
<script>
  // 1. INITIALIZATION
  const m_db = window.supabase.createClient(
    "https://gztneesmxwfhdmhqikel.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd6dG5lZXNteHdmaGRtaHFpa2VsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxNjAzNDAsImV4cCI6MjA4MjczNjM0MH0.iWDtkljuQLZFQeLvBrJHVyXNfpu4bJOvvVab3G0eOsA"
  );

  let sessionId = localStorage.getItem("modasou_session_id") || "sess_" + Math.random().toString(36).substr(2, 9);
  localStorage.setItem("modasou_session_id", sessionId);

  // 2. METER/CM SYNC
  function setupSync(mId, cId) {
    const m = document.getElementById(mId), c = document.getElementById(cId);
    m.oninput = () => c.value = m.value ? Math.round(m.value * 100) : '';
    c.oninput = () => m.value = c.value ? (c.value / 100).toFixed(2) : '';
  }

  document.addEventListener("DOMContentLoaded", () => {
    setupSync('topMeter', 'topCm');
    setupSync('bottomMeter', 'bottomCm');
  });

  // 3. PREVIEWS
  function handlePreview(input, pId) {
    const file = input.files[0], el = document.getElementById(pId);
    if (file) {
      el.src = URL.createObjectURL(file);
      el.style.display = 'block';
      if(el.tagName === 'VIDEO') el.load();
    }
  }

  function selectSample(img) {
    document.querySelectorAll('.sample-scroll img').forEach(i => i.classList.remove('selected'));
    img.classList.add('selected');
    const prev = document.getElementById('designPreview');
    prev.src = img.src;
    prev.style.display = 'block';
  }

  function previewGoogleImage() {
    const url = document.getElementById('googleUrl').value.trim();
    const img = document.getElementById('urlPreview');
    if (url) { img.src = url; img.style.display = 'block'; }
  }

  // 4. BACKEND FUNCTIONS
  
  async function submitFabricData() {
    localStorage.setItem("active_service", "service2");
    const btn = document.getElementById('submitFabricBtn'), file = document.getElementById('fabricVideoInput').files[0];
    if (!file) return alert("Please upload a fabric video");
    btn.innerText = "Uploading..."; btn.disabled = true;

    try {
      const path = `fabric_${sessionId}_${Date.now()}.mp4`;
      await m_db.storage.from('fabrics').upload(path, file);
      const { data } = m_db.storage.from('fabrics').getPublicUrl(path);

      await m_db.from('service_2').upsert([{
        session_id: sessionId,
        fabric_video_url: data.publicUrl,
        top_mtr: document.getElementById('topMeter').value || null,
        top_cm: document.getElementById('topCm').value || null,
        bottom_mtr: document.getElementById('bottomMeter').value || null,
        bottom_cm: document.getElementById('bottomCm').value || null,
        lining_preference: document.querySelector('input[name="lining"]:checked').value,
        designer_note: document.getElementById('designerNote').value || null,
        created_at: new Date()
      }], { onConflict: 'session_id' });


      // Change your alert to this so you can see the ID
      alert("Success! Fabric data saved for Session: " + sessionId);
      console.log("Check your Supabase table for this ID now!");
      
      btn.innerText = "SUBMITTED ✓";
    } catch (e) { alert(e.message); btn.disabled = false; btn.innerText = "SUBMIT FABRIC"; }
  }

  async function submitDesignData() {
    localStorage.setItem("active_service", "service2");
    const btn = document.getElementById('submitDesignBtn'), file = document.getElementById('designUpload').files[0];
    const sampleImg = document.querySelector('.sample-scroll img.selected');
    
    if (!file && !sampleImg) return alert("Please upload an image or select a sample");
    btn.innerText = "Saving..."; btn.disabled = true;

    try {
      let finalUrl = sampleImg ? sampleImg.src : "";
      if (file) {
        const path = `design_${sessionId}_${Date.now()}.jpg`;
        await m_db.storage.from('designs').upload(path, file);
        finalUrl = m_db.storage.from('designs').getPublicUrl(path).data.publicUrl;
      }

      await m_db.from('service_2').upsert([{
        session_id: sessionId,
        design_image_url: finalUrl,
        created_at: new Date()
      }], { onConflict: 'session_id' });

      alert("Design saved! ✅");
      btn.innerText = "SUBMITTED ✓";
    } catch (e) { alert(e.message); btn.disabled = false; }
  }

  async function submitGoogleDesign() {
    localStorage.setItem("active_service", "service2");
    const url = document.getElementById('googleUrl').value.trim();
    if (!url) return alert("Please paste an image link first");
    const btn = document.getElementById('submitGoogleBtn');
    btn.innerText = "Saving Link...";

    try {
      await m_db.from('service_2').upsert([{
        session_id: sessionId,
        google_image_url: url,
        created_at: new Date()
      }], { onConflict: 'session_id' });

      alert("Online design saved! ✅");
      btn.innerText = "SAVED ✓";
    } catch (e) { alert(e.message); }
  }

  // NAVIGATION
  document.getElementById("measurementBtn").onclick = () => {
    const s = new URLSearchParams(window.location.search).get("service");
    if(!s) return alert("Select service first");
    const routes = { blouse: "measurement-blouse.html", dress: "measurement-dress.html", top: "measurement-Tops.html", kurta: "measurement-kurta.html", skirt: "measurement-skirt.html", lehenga: "measurement-lehenga.html", pant: "measurement-pants.html" };
    window.location.href = routes[s] || alert("Route not found");
  };
</script>


<!-- Put this at the bottom of service pages/2page.html -->

<script>
async function loadSampleImages() {
    // 1. Get the 'service' from the URL (matches your screenshot links)
    const urlParams = new URLSearchParams(window.location.search);
    const serviceType = urlParams.get('service'); // Changed from 'category' to 'service'

    // If no service is selected (e.g. they just opened the page directly), stop here.
    if (!serviceType) return; 

    console.log("Loading designs for:", serviceType);

    // 2. Fetch data from Supabase 
    // Make sure your table column in Supabase is named 'category' or change this to match
    const { data, error } = await supabase
        .from('design_samples')
        .select('*')
        .eq('category', serviceType); // Matches the URL value to the database column

    if (error) {
        console.error('Error fetching samples:', error);
        return;
    }

    // 3. Find the container to put images in
    const container = document.getElementById('sample-images-container');
    
    // Safety check: if the container doesn't exist on this page, stop to avoid errors
    if (!container) return; 

    container.innerHTML = ''; // Clear defaults

    if (data.length === 0) {
        container.innerHTML = `<p style="text-align:center; padding:20px;">No specific designs found for ${serviceType} yet.</p>`;
        return;
    }

    // 4. Create the image cards
    data.forEach(design => {
        const card = document.createElement('div');
        // Add styling classes matching your site
        card.style.display = 'inline-block';
        card.style.margin = '10px';
        card.style.textAlign = 'center';

        const img = document.createElement('img');
        img.src = design.image_url;
        img.style.width = '120px'; // Adjust size to fit your box
        img.style.height = '150px';
        img.style.objectFit = 'cover';
        img.style.cursor = 'pointer';
        
        // When clicked, maybe fill a form field or alert
        img.onclick = () => alert(`You selected a design by ${design.designer_name}`);

        const name = document.createElement('p');
        name.innerText = design.designer_name;
        name.style.fontSize = '12px';

        card.appendChild(img);
        card.appendChild(name);
        container.appendChild(card);
    });
}

// Run this when the page loads
window.onload = loadSampleImages;
</script>
</body>
</html></script>